<!DOCTYPE html>
<html lang="en">

<head>
<%- include('./partials/head.ejs') %>
</head>

<body>
  <%- include('./partials/themeSystems.ejs') %>

  <%- include('./partials/navbar.ejs') %>

  <div class="container-fluid">
    <div class="row">
      <%- include('./partials/sidebar.ejs') %>

      <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
        <div
          class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h1 class="h2">Product List</h1>
        </div>

        <% if (notification?.dataValues?.productCount !== '0') { %>
          <div class="alert alert-warning alert-dismissible fade show mt-3" role="alert">
            The number of products to date is <%= notification?.dataValues?.productCount %>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        <% } %>

        <div class="table-responsive">
          <table class="table table-striped table-sm">
            <thead>
              <tr class="text-center">
                <th class="w-auto" scope="col">Id</th>
                <th class="w-auto" scope="col">Name</th>
                <th class="w-auto" scope="col">Price</th>
                <th class="w-25" scope="col">Image</th>
                <th class="w-auto" scope="col">Stock</th>
                <th class="w-auto" scope="col">Category</th>
                <th class="w-auto" scope="col">Action</th>
              </tr>
            </thead>
            <tbody>
              <% data.forEach(product => { %>
                <tr class="text-center align-middle">
                  <td><%= product.id %></td>
                  <td><%= product.name %></td>
                  <td><%= product.priceToIdr() %></td>
                  <td><img src="<%= product.imageUrl %>" class="rounded float-start w-100" alt="<%= product.name %>"></td>
                  <td><%= product.stock %></td>
                  <td><%= product.Category.name %></td>
                  <td>
                    <a class="btn btn-outline-success" href="/admin/products/<%= product.id %>/edit" role="button"><i class="bi bi-pencil"></i> Edit</a>
                    <a class="btn btn-outline-danger" href="/admin/products/<%= product.id %>/delete" role="button"><i class="bi bi-trash3"></i> Delete</a>
                  </td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      </main>
    </div>
  </div>

  <%- include('./partials/footer.ejs') %>
</body>

</html>